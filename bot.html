<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant</title>
    <style>
        @font-face {
            font-family: BitxMap;
            src: url('public/BitxMapFonttfb.ttf');
        }
        @font-face {
            font-family: monument;
            src: url('public/MonumentExtended-Regular.otf');
        }
        @font-face {
            font-family: Inter;
            src: url('public/Inter.ttc');
        }
        body {
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none;
            min-width: 100vw;
            min-height: 100vh;
            background-color: #ededed;
            font-family: BitxMap;
        }
        ::-webkit-scrollbar {
            display: none;
        }
        p {
            margin: 0;
            padding: 0;
        }
        .icon {
            height: 1.8vw;
            width: 1.8vw;
        }
        .navbar {
            border: 1px solid black;
            display: flex;
            font-family: BitxMap;
            gap: 3vw;
            align-items: center;
            padding: 0.5vw 0.8vw 0.5vw 0.8vw;
            top: 3vh;
            left: 2vw;
            position: fixed;
            width: max-content;
            background-color: #fbfbfb;
            z-index: -1;
        }
        .welcomeNav {
            margin-left: 12vw;
        }
        .cursor {
            width: 20px;
            height: 20px;
            background-color: black;
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        .container {
            width: 80vw;
            height: 60vh;
            background-color: white;
            margin-left: 10vw;
            margin-top: 20vh;
            display: flex;
            flex-direction: column;
        }
        .containerHeading, .containerFooter {
            background-color: #f8f8f8;
            padding: 1.8vh;
            font-family: monument;
        }
        .containerBody {
            flex: 1;
        }
        .containerFooter {
            display: flex;
            justify-content: center;
        }
        .containerFooter input {
            outline: none;
            border: none;
            border-radius: 100vw;
            font-family: BitxMap;
            font-size: 1.1vw;
            width: 50vw;
            padding: 0.75vw;
        }
    </style>
</head>
<body>
    <div class="cursor" id="cursor"></div>
    <div class="navbar">
        <svg class="icon" id="cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 27 27">
            <rect id="topLeft" width="9" height="9" fill="currentColor"></rect>
            <rect id="bottomLeft" y="18" width="9" height="9" fill="currentColor"> </rect>
            <rect id="topRight" x="18" width="9" height="9" fill="currentColor"></rect>
            <rect id="center" x="9" y="9" width="9" height="9" fill="currentColor"></rect>
        </svg>
        <a class="welcomeNav" onclick="window.location.href='/#welcome'">WELCOME</a>
        <a onclick="window.location.href='/#about'">ABOUT</a>
        <a onclick="window.location.href='/#projects'">PROJECTS</a>
        <a onclick="window.location.href='/#contact'">CONTACT</a>
    </div>
    <div class="container">
        <div class="containerHeading">Assistant</div>
        <div class="containerBody">
        </div>
        <div class="containerFooter">
            <input type="text" placeholder="Enter your question:" id="mainInput">
        </div>
    </div>
    <script>
        window.addEventListener('mousemove', (e) => {
            document.getElementById('cursor').style.top = `${e.clientY - 10}px`
            document.getElementById('cursor').style.left = `${e.clientX - 10}px`
        })
        const googleAPIKey = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro-latest:generateContent?key=AIzaSyBPwy19Oy_lEAklRAN0zV_G8nDTswdEqcI"
        // askTheQuestion(`What is your name?`)
        //     .then(response => {
        //         console.log(response)
        //     }).catch(err => {
        //         console.log(err)
        //     })  
        function askTheQuestion(prompt) {
            return new Promise((resolve, reject) => {
                fetch(googleAPIKey, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        "contents": [{
                            "parts": [{
                                "text": prompt
                            }]}
                        ]})
                })
                .then(rawResponse => {
                    if (!rawResponse.ok) {
                        console.log('Network response was not ok');
                    }
                    return rawResponse.json();
                })
                .then(content => {
                    console.log(content);
                    if (content.candidates[0].finishReason == "MAX_TOKENS") {
                        text.innerText = "The service is unavailable right now. Please try again after a minute or so.";
                    }
                    resolve(content.candidates[0].content.parts[0].text);
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                    reject(error);
                });
            });
        }
    </script>
</body>
</html>